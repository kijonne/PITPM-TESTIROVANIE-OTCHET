–û—Ç–ª–∏—á–Ω–æ–µ —É—Ç–æ—á–Ω–µ–Ω–∏–µ! –í–æ—Ç –ø–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–ø–∏—Å–∫–æ–≤ –≤–º–µ—Å—Ç–æ –ë–î –∏ –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Minimal API.

---

‚úÖ 5.1.2 –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø–∏—Å–∫–æ–º –∑–∞–¥–∞—á (In-Memory)

–ú–æ–¥–µ–ª—å TodoItem.cs:

```csharp
namespace TodoApi.Models
{
    public enum Status
    {
        Pending,
        InProgress,
        Completed
    }

    public class TodoItem
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public DateTime DueDate { get; set; }
        public Status Status { get; set; }
    }
}
```

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä TodoController.cs:

```csharp
using Microsoft.AspNetCore.Mvc;
using TodoApi.Models;
using System.Collections.Generic;
using System.Linq;

namespace TodoApi.Controllers
{
    [ApiController]
    [Route("api/[controller]")]
    public class TodoController : ControllerBase
    {
        private static List<TodoItem> _todos = new();
        private static int _nextId = 1;

        /// <summary>
        /// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏
        /// </summary>
        [HttpGet]
        public IActionResult GetAll()
        {
            return Ok(_todos);
        }

        /// <summary>
        /// –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á—É –ø–æ ID
        /// </summary>
        /// <param name="id">–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏</param>
        [HttpGet("{id}")]
        public IActionResult GetById(int id)
        {
            var todo = _todos.FirstOrDefault(t => t.Id == id);
            if (todo == null)
                return NotFound($"–ó–∞–¥–∞—á–∞ —Å ID {id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞");
            
            return Ok(todo);
        }

        /// <summary>
        /// –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
        /// </summary>
        /// <param name="item">–î–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏</param>
        [HttpPost]
        public IActionResult Create([FromBody] TodoItem item)
        {
            if (item == null)
                return BadRequest("–î–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏");
            
            if (string.IsNullOrWhiteSpace(item.Name))
                return BadRequest("–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ");
            
            item.Id = _nextId++;
            _todos.Add(item);
            
            return CreatedAtAction(nameof(GetById), new { id = item.Id }, item);
        }

        /// <summary>
        /// –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É
        /// </summary>
        /// <param name="id">–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏</param>
        /// <param name="item">–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</param>
        [HttpPut("{id}")]
        public IActionResult Update(int id, [FromBody] TodoItem item)
        {
            if (item == null || item.Id != id)
                return BadRequest("–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ");
            
            var existing = _todos.FirstOrDefault(t => t.Id == id);
            if (existing == null)
                return NotFound($"–ó–∞–¥–∞—á–∞ —Å ID {id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞");
            
            existing.Name = item.Name;
            existing.Description = item.Description;
            existing.DueDate = item.DueDate;
            existing.Status = item.Status;
            
            return Ok(existing);
        }

        /// <summary>
        /// –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É
        /// </summary>
        /// <param name="id">–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏</param>
        [HttpDelete("{id}")]
        public IActionResult Delete(int id)
        {
            var todo = _todos.FirstOrDefault(t => t.Id == id);
            if (todo == null)
                return NotFound($"–ó–∞–¥–∞—á–∞ —Å ID {id} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞");
            
            _todos.Remove(todo);
            return NoContent();
        }
    }
}
```

---

‚úÖ 5.1.3 & 5.1.4 Minimal API Endpoints

–í Program.cs –¥–æ–±–∞–≤—å—Ç–µ:

```csharp
using TodoApi.Models;

// –°–æ–∑–¥–∞–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –¥–ª—è Minimal API
var todosForMinimalApi = new List<TodoItem>
{
    new() { Id = 1, Name = "–ò–∑—É—á–∏—Ç—å ASP.NET Core", Description = "–ü—Ä–æ–π—Ç–∏ –∫—É—Ä—Å", DueDate = DateTime.Now.AddDays(7), Status = Status.InProgress },
    new() { Id = 2, Name = "–°–¥–µ–ª–∞—Ç—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫—É—é —Ä–∞–±–æ—Ç—É", Description = "–í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –∑–∞–¥–∞–Ω–∏—è", DueDate = DateTime.Now.AddDays(2), Status = Status.Pending },
    new() { Id = 3, Name = "–°–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç", Description = "–ó–∞—â–∏—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç", DueDate = DateTime.Now.AddDays(14), Status = Status.Pending }
};

// Health check endpoint
app.MapGet("/health", () => 
{
    return Results.Ok(new 
    { 
        status = "Healthy", 
        timestamp = DateTime.UtcNow,
        service = "Todo API",
        version = "1.0"
    });
})
.WithName("HealthCheck")
.WithTags("Monitoring");

// –ü–æ–∏—Å–∫ –∑–∞–¥–∞—á –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∞—Ç
app.MapGet("/todos/by-date", (DateTime? startDate, DateTime? endDate) =>
{
    var start = startDate ?? DateTime.MinValue;
    var end = endDate ?? DateTime.MaxValue;
    
    var filtered = todosForMinimalApi
        .Where(t => t.DueDate >= start && t.DueDate <= end)
        .ToList();
    
    if (!filtered.Any())
        return Results.NotFound(new { message = "–ó–∞–¥–∞—á–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã" });
    
    return Results.Ok(filtered);
})
.WithName("GetTodosByDateRange")
.WithTags("Todos")
.Produces<List<TodoItem>>(StatusCodes.Status200OK)
.Produces(StatusCodes.Status404NotFound)
.WithOpenApi(operation =>
{
    operation.Summary = "–ü–æ–∏—Å–∫ –∑–∞–¥–∞—á –ø–æ –¥–∞—Ç–∞–º";
    operation.Description = "–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–∞–¥–∞—á–∏, —Å—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –¥–∞—Ç.";
    operation.Parameters[0].Description = "–ù–∞—á–∞–ª—å–Ω–∞—è –¥–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)";
    operation.Parameters[1].Description = "–ö–æ–Ω–µ—á–Ω–∞—è –¥–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)";
    return operation;
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–¥–∞—á (Minimal API –≤–µ—Ä—Å–∏—è)
app.MapGet("/todos/all", () =>
{
    return Results.Ok(todosForMinimalApi);
})
.WithName("GetAllTodosMinimal")
.WithTags("Todos");
```

---

‚úÖ –ü—Ä–∏–º–µ—Ä—ã HTTP-–æ—Ç–≤–µ—Ç–æ–≤ (–∫–∞–∫ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤ –∑–∞–¥–∞–Ω–∏–∏):

1. GET /api/todo ‚Üí 200 OK

```json
[
  {
    "id": 1,
    "name": "–ò–∑—É—á–∏—Ç—å ASP.NET Core",
    "description": "–ü—Ä–æ–π—Ç–∏ –∫—É—Ä—Å",
    "dueDate": "2024-12-10T10:00:00",
    "status": 1
  }
]
```

2. GET /api/todo/999 ‚Üí 404 Not Found

```json
{
  "type": "https://tools.ietf.org/html/rfc7231#section-6.5.4",
  "title": "Not Found",
  "status": 404,
  "detail": "–ó–∞–¥–∞—á–∞ —Å ID 999 –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
}
```

3. POST /api/todo (–±–µ–∑ –¥–∞–Ω–Ω—ã—Ö) ‚Üí 400 Bad Request

```json
{
  "type": "https://tools.ietf.org/html/rfc7231#section-6.5.1",
  "title": "Bad Request",
  "status": 400,
  "detail": "–î–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏"
}
```

4. POST /api/todo (—É—Å–ø–µ—à–Ω–æ) ‚Üí 201 Created

```json
{
  "id": 4,
  "name": "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "dueDate": "2024-12-31T23:59:59",
  "status": 0
}
```

5. DELETE /api/todo/1 ‚Üí 204 No Content

(–±–µ–∑ —Ç–µ–ª–∞ –æ—Ç–≤–µ—Ç–∞)

---

‚úÖ 5.5.1 –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Minimal API:

```csharp
app.MapPost("/todos", (TodoItem item) =>
{
    if (string.IsNullOrWhiteSpace(item.Name))
        return Results.BadRequest("–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ");
    
    item.Id = todosForMinimalApi.Max(t => t.Id) + 1;
    todosForMinimalApi.Add(item);
    
    return Results.Created($"/todos/{item.Id}", item);
})
.WithName("CreateTodo")
.WithTags("Todos")
.Accepts<TodoItem>("application/json")
.Produces<TodoItem>(StatusCodes.Status201Created)
.Produces(StatusCodes.Status400BadRequest)
.WithOpenApi(operation =>
{
    operation.Summary = "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É";
    operation.Description = "–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –≤ —Å–ø–∏—Å–æ–∫";
    operation.RequestBody = new Microsoft.OpenApi.Models.OpenApiRequestBody
    {
        Description = "–î–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏",
        Required = true
    };
    return operation;
});
```

---

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```
TodoApi/
‚îú‚îÄ‚îÄ Controllers/
‚îÇ   ‚îî‚îÄ‚îÄ TodoController.cs
‚îú‚îÄ‚îÄ Models/
‚îÇ   ‚îî‚îÄ‚îÄ TodoItem.cs
‚îú‚îÄ‚îÄ Program.cs
‚îú‚îÄ‚îÄ appsettings.json
‚îî‚îÄ‚îÄ TodoApi.csproj
```

---

üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞:

1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∫–∞–∫ –≤ –ø. 5.1.1
2. –î–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª—ã –º–æ–¥–µ–ª–µ–π –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤
3. –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ Minimal API –≤ Program.cs
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
dotnet run
```

1. –û—Ç–∫—Ä–æ–π—Ç–µ:
   ¬∑ Swagger UI: https://localhost:5001/swagger
   ¬∑ Health check: https://localhost:5001/health
   ¬∑ –ü–æ–∏—Å–∫ –ø–æ –¥–∞—Ç–∞–º: https://localhost:5001/todos/by-date?startDate=2024-12-01&endDate=2024-12-31

---

–ù—É–∂–Ω—ã –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è XML-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, DocFx –∏–ª–∏ Bruno?
